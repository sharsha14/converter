<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Currency Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0f172a;
            --secondary-bg: #1e293b;
            --card-bg: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #10b981;
            --error: #ef4444;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.2);
            --font-size-base: 16px;
        }

        html[data-theme="light"] {
            --primary-bg: #f8fafc;
            --secondary-bg: #e2e8f0;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #10b981;
            --error: #ef4444;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            min-height: 100vh;
            font-size: var(--font-size-base);
            line-height: 1.5;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: clamp(0.75rem, 3vw, 1.5rem);
        }

        .header {
            text-align: center;
            margin-bottom: clamp(1rem, 4vw, 2rem);
            position: relative;
        }

        .header h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            font-weight: 700;
            color: var(--accent);
            margin-bottom: clamp(0.3rem, 1vw, 0.5rem);
        }

        .header p {
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            color: var(--text-secondary);
        }

        .theme-toggle {
            position: absolute;
            top: 0;
            right: clamp(0.5rem, 2vw, 1rem);
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 25px;
            padding: clamp(0.3rem, 1vw, 0.5rem) clamp(0.6rem, 1.5vw, 0.8rem);
            color: var(--text-primary);
            cursor: pointer;
            font-size: clamp(0.8rem, 2vw, 1rem);
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .theme-toggle:hover,
        .theme-toggle:active {
            background: var(--accent);
        }

        .converter-card {
            background: var(--card-bg);
            border-radius: clamp(8px, 2vw, 12px);
            padding: clamp(1rem, 3vw, 1.5rem);
            box-shadow: 0 4px 8px var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: clamp(0.75rem, 2vw, 1rem);
        }

        .converter-section {
            display: flex;
            flex-direction: column;
            gap: clamp(0.5rem, 2vw, 1rem);
            align-items: stretch;
        }

        .currency-input {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .currency-input label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: clamp(0.8rem, 2vw, 0.9rem);
        }

        .input-group {
            margin-bottom: clamp(0.3rem, 1vw, 0.5rem);
        }

        .amount-input {
            width: 100%;
            padding: clamp(0.5rem, 2vw, 0.8rem);
            border: 1px solid var(--border);
            border-radius: clamp(4px, 1vw, 6px);
            background: var(--secondary-bg);
            color: var(--text-primary);
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            transition: border-color 0.2s ease;
        }

        .amount-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .select-group {
            display: flex;
            align-items: center;
            gap: clamp(0.3rem, 1vw, 0.5rem);
        }

        .flag-icon {
            width: clamp(20px, 4vw, 24px);
            height: clamp(14px, 3vw, 16px);
            border-radius: 2px;
            object-fit: cover;
            border: 1px solid var(--border);
        }

        .currency-select {
            flex: 1;
            padding: clamp(0.5rem, 2vw, 0.8rem);
            border: 1px solid var(--border);
            border-radius: clamp(4px, 1vw, 6px);
            background: var(--secondary-bg);
            color: var(--text-primary);
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            cursor: pointer;
            max-height: 40px;
            overflow-y: auto;
        }

        .currency-select:focus {
            outline: none;
            border-color: var(--accent);
        }

        .swap-button {
            background: var(--accent);
            border: none;
            border-radius: 50%;
            width: clamp(40px, 8vw, 48px);
            height: clamp(40px, 8vw, 48px);
            color: white;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            align-self: center;
            transition: background 0.2s ease;
            min-width: 44px;
            min-height: 44px;
        }

        .swap-button:hover,
        .swap-button:active {
            background: var(--accent-hover);
            transform: rotate(180deg);
        }

        .result-section {
            background: var(--secondary-bg);
            border-radius: clamp(4px, 1vw, 8px);
            padding: clamp(0.75rem, 2vw, 1rem);
            margin-top: clamp(0.5rem, 2vw, 1rem);
            border: 1px solid var(--border);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .result-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .conversion-result {
            text-align: center;
            margin-bottom: clamp(0.5rem, 2vw, 1rem);
        }

        .conversion-amount {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            font-weight: 700;
            color: var(--success);
            margin-bottom: clamp(0.2rem, 1vw, 0.3rem);
        }

        .conversion-words {
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            color: var(--text-secondary);
            font-style: italic;
        }

        .currency-details {
            display: flex;
            flex-direction: column;
            gap: clamp(0.5rem, 2vw, 1rem);
        }

        .currency-detail {
            background: var(--card-bg);
            padding: clamp(0.5rem, 2vw, 0.75rem);
            border-radius: clamp(4px, 1vw, 6px);
            border: 1px solid var(--border);
        }

        .currency-detail h3 {
            color: var(--accent);
            margin-bottom: clamp(0.3rem, 1vw, 0.5rem);
            font-size: clamp(0.8rem, 2vw, 0.9rem);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: clamp(0.2rem, 1vw, 0.3rem);
            padding: clamp(0.2rem, 1vw, 0.3rem) 0;
            border-bottom: 1px solid var(--border);
            font-size: clamp(0.7rem, 2vw, 0.8rem);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .detail-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .loading {
            text-align: center;
            padding: clamp(0.5rem, 2vw, 1rem);
            color: var(--text-secondary);
        }

        .spinner {
            border: 2px solid var(--border);
            border-top: 2px solid var(--accent);
            border-radius: 50%;
            width: clamp(20px, 5vw, 30px);
            height: clamp(20px, 5vw, 30px);
            animation: spin 1s linear infinite;
            margin: 0 auto clamp(0.3rem, 1vw, 0.5rem);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: var(--error);
            color: white;
            padding: clamp(0.5rem, 2vw, 0.75rem);
            border-radius: clamp(4px, 1vw, 6px);
            margin: clamp(0.3rem, 1vw, 0.5rem) 0;
            text-align: center;
            font-size: clamp(0.7rem, 2vw, 0.8rem);
        }

        /* Mobile screens (‚â§480px) */
        @media (max-width: 480px) {
            body {
                font-size: calc(var(--font-size-base) * 0.85);
            }

            .container {
                padding: 0.5rem;
            }

            .header h1 {
                font-size: clamp(1.2rem, 4vw, 1.8rem);
            }

            .header p {
                font-size: clamp(0.7rem, 2vw, 0.8rem);
            }

            .theme-toggle {
                font-size: clamp(0.7rem, 1.8vw, 0.8rem);
            }

            .converter-card {
                padding: 0.75rem;
            }

            .converter-section {
                gap: 0.5rem;
            }

            .swap-button {
                width: clamp(36px, 7vw, 40px);
                height: clamp(36px, 7vw, 40px);
                font-size: clamp(0.9rem, 2vw, 1rem);
            }

            .amount-input,
            .currency-select {
                padding: 0.5rem;
                font-size: clamp(0.7rem, 2vw, 0.8rem);
            }

            .flag-icon {
                width: clamp(18px, 3.5vw, 20px);
                height: clamp(12px, 2.5vw, 14px);
            }

            .currency-details {
                gap: 0.5rem;
            }

            .conversion-amount {
                font-size: clamp(1rem, 3.5vw, 1.5rem);
            }
        }

        /* Tablets and larger mobiles (481px‚Äì768px) */
        @media (min-width: 481px) and (max-width: 768px) {
            body {
                font-size: calc(var(--font-size-base) * 0.9);
            }

            .container {
                padding: 0.75rem;
            }

            .header h1 {
                font-size: clamp(1.5rem, 4.5vw, 2rem);
            }

            .converter-section {
                gap: 0.75rem;
            }

            .swap-button {
                width: clamp(40px, 8vw, 44px);
                height: clamp(40px, 8vw, 44px);
            }
        }

        /* Small desktops (769px‚Äì1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                max-width: 90%;
            }

            .converter-section {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-between;
                gap: 1rem;
            }

            .currency-input {
                flex: 1 1 45%;
            }

            .swap-button {
                flex: 0 0 auto;
                align-self: center;
            }

            .currency-details {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .currency-detail {
                flex: 1 1 45%;
            }
        }

        /* Desktops (1025px and above) */
        @media (min-width: 1025px) {
            .container {
                max-width: 800px;
            }

            .converter-section {
                flex-direction: row;
                gap: 1.5rem;
            }

            .currency-input {
                flex: 1;
            }

            .currency-details {
                flex-direction: row;
                gap: 1.5rem;
            }

            .currency-detail {
                flex: 1;
            }
        }

        /* Touch-friendly adjustments */
        button, select, input {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        /* High-density displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            body {
                font-size: calc(var(--font-size-base) * 1.05);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí± Currency Converter</h1>
            <p>Convert between 195+ world currencies with real-time exchange rates</p>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">üåô</button>
        </div>

        <div class="converter-card">
            <div class="converter-section">
                <div class="currency-input">
                    <label for="from-amount">From</label>
                    <div class="input-group">
                        <input type="number" id="from-amount" class="amount-input" placeholder="Enter amount" min="0" step="0.01" max="1000000000" required>
                    </div>
                    <div class="select-group">
                        <img id="from-flag" class="flag-icon" src="https://flagcdn.com/w40/in.png" alt="India flag">
                        <select id="from-currency" class="currency-select">
                            <option value="INR">INR - Indian Rupee</option>
                        </select>
                    </div>
                </div>

                <button class="swap-button" onclick="swapCurrencies()" aria-label="Swap currencies">‚áÑ</button>

                <div class="currency-input">
                    <label for="to-amount">To</label>
                    <div class="input-group">
                        <input type="number" id="to-amount" class="amount-input" placeholder="Converted amount" readonly>
                    </div>
                    <div class="select-group">
                        <img id="to-flag" class="flag-icon" src="https://flagcdn.com/w40/us.png" alt="US flag">
                        <select id="to-currency" class="currency-select">
                            <option value="USD">USD - US Dollar</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="result-section" class="result-section">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading currencies...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Currency data with country codes and names
        const currencies = {
            "AED": { name: "UAE Dirham", country: "United Arab Emirates", code: "ae" },
            "AFN": { name: "Afghan Afghani", country: "Afghanistan", code: "af" },
            "ALL": { name: "Albanian Lek", country: "Albania", code: "al" },
            "AMD": { name: "Armenian Dram", country: "Armenia", code: "am" },
            "ANG": { name: "Netherlands Antillean Guilder", country: "Netherlands Antilles", code: "an" },
            "AOA": { name: "Angolan Kwanza", country: "Angola", code: "ao" },
            "ARS": { name: "Argentine Peso", country: "Argentina", code: "ar" },
            "AUD": { name: "Australian Dollar", country: "Australia", code: "au" },
            "AWG": { name: "Aruban Florin", country: "Aruba", code: "aw" },
            "AZN": { name: "Azerbaijani Manat", country: "Azerbaijan", code: "az" },
            "BAM": { name: "Bosnia-Herzegovina Convertible Mark", country: "Bosnia and Herzegovina", code: "ba" },
            "BBD": { name: "Barbadian Dollar", country: "Barbados", code: "bb" },
            "BDT": { name: "Bangladeshi Taka", country: "Bangladesh", code: "bd" },
            "BGN": { name: "Bulgarian Lev", country: "Bulgaria", code: "bg" },
            "BHD": { name: "Bahraini Dinar", country: "Bahrain", code: "bh" },
            "BIF": { name: "Burundian Franc", country: "Burundi", code: "bi" },
            "BMD": { name: "Bermudan Dollar", country: "Bermuda", code: "bm" },
            "BND": { name: "Brunei Dollar", country: "Brunei", code: "bn" },
            "BOB": { name: "Bolivian Boliviano", country: "Bolivia", code: "bo" },
            "BRL": { name: "Brazilian Real", country: "Brazil", code: "br" },
            "BSD": { name: "Bahamian Dollar", country: "Bahamas", code: "bs" },
            "BTN": { name: "Bhutanese Ngultrum", country: "Bhutan", code: "bt" },
            "BWP": { name: "Botswanan Pula", country: "Botswana", code: "bw" },
            "BYN": { name: "Belarusian Ruble", country: "Belarus", code: "by" },
            "BZD": { name: "Belize Dollar", country: "Belize", code: "bz" },
            "CAD": { name: "Canadian Dollar", country: "Canada", code: "ca" },
            "CDF": { name: "Congolese Franc", country: "Democratic Republic of Congo", code: "cd" },
            "CHF": { name: "Swiss Franc", country: "Switzerland", code: "ch" },
            "CLP": { name: "Chilean Peso", country: "Chile", code: "cl" },
            "CNY": { name: "Chinese Yuan", country: "China", code: "cn" },
            "COP": { name: "Colombian Peso", country: "Colombia", code: "co" },
            "CRC": { name: "Costa Rican Col√≥n", country: "Costa Rica", code: "cr" },
            "CUP": { name: "Cuban Peso", country: "Cuba", code: "cu" },
            "CVE": { name: "Cape Verdean Escudo", country: "Cape Verde", code: "cv" },
            "CZK": { name: "Czech Koruna", country: "Czech Republic", code: "cz" },
            "DJF": { name: "Djiboutian Franc", country: "Djibouti", code: "dj" },
            "DKK": { name: "Danish Krone", country: "Denmark", code: "dk" },
            "DOP": { name: "Dominican Peso", country: "Dominican Republic", code: "do" },
            "DZD": { name: "Algerian Dinar", country: "Algeria", code: "dz" },
            "EGP": { name: "Egyptian Pound", country: "Egypt", code: "eg" },
            "ERN": { name: "Eritrean Nakfa", country: "Eritrea", code: "er" },
            "ETB": { name: "Ethiopian Birr", country: "Ethiopia", code: "et" },
            "EUR": { name: "Euro", country: "European Union", code: "eu" },
            "FJD": { name: "Fijian Dollar", country: "Fiji", code: "fj" },
            "FKP": { name: "Falkland Islands Pound", country: "Falkland Islands", code: "fk" },
            "GBP": { name: "British Pound Sterling", country: "United Kingdom", code: "gb" },
            "GEL": { name: "Georgian Lari", country: "Georgia", code: "ge" },
            "GHS": { name: "Ghanaian Cedi", country: "Ghana", code: "gh" },
            "GIP": { name: "Gibraltar Pound", country: "Gibraltar", code: "gi" },
            "GMD": { name: "Gambian Dalasi", country: "Gambia", code: "gm" },
            "GNF": { name: "Guinean Franc", country: "Guinea", code: "gn" },
            "GTQ": { name: "Guatemalan Quetzal", country: "Guatemala", code: "gt" },
            "GYD": { name: "Guyanaese Dollar", country: "Guyana", code: "gy" },
            "HKD": { name: "Hong Kong Dollar", country: "Hong Kong", code: "hk" },
            "HNL": { name: "Honduran Lempira", country: "Honduras", code: "hn" },
            "HRK": { name: "Croatian Kuna", country: "Croatia", code: "hr" },
            "HTG": { name: "Haitian Gourde", country: "Haiti", code: "ht" },
            "HUF": { name: "Hungarian Forint", country: "Hungary", code: "hu" },
            "IDR": { name: "Indonesian Rupiah", country: "Indonesia", code: "id" },
            "ILS": { name: "Israeli New Sheqel", country: "Israel", code: "il" },
            "INR": { name: "Indian Rupee", country: "India", code: "in" },
            "IQD": { name: "Iraqi Dinar", country: "Iraq", code: "iq" },
            "IRR": { name: "Iranian Rial", country: "Iran", code: "ir" },
            "ISK": { name: "Icelandic Kr√≥na", country: "Iceland", code: "is" },
            "JMD": { name: "Jamaican Dollar", country: "Jamaica", code: "jm" },
            "JOD": { name: "Jordanian Dinar", country: "Jordan", code: "jo" },
            "JPY": { name: "Japanese Yen", country: "Japan", code: "jp" },
            "KES": { name: "Kenyan Shilling", country: "Kenya", code: "ke" },
            "KGS": { name: "Kyrgystani Som", country: "Kyrgyzstan", code: "kg" },
            "KHR": { name: "Cambodian Riel", country: "Cambodia", code: "kh" },
            "KMF": { name: "Comorian Franc", country: "Comoros", code: "km" },
            "KPW": { name: "North Korean Won", country: "North Korea", code: "kp" },
            "KRW": { name: "South Korean Won", country: "South Korea", code: "kr" },
            "KWD": { name: "Kuwaiti Dinar", country: "Kuwait", code: "kw" },
            "KYD": { name: "Cayman Islands Dollar", country: "Cayman Islands", code: "ky" },
            "KZT": { name: "Kazakhstani Tenge", country: "Kazakhstan", code: "kz" },
            "LAK": { name: "Laotian Kip", country: "Laos", code: "la" },
            "LBP": { name: "Lebanese Pound", country: "Lebanon", code: "lb" },
            "LKR": { name: "Sri Lankan Rupee", country: "Sri Lanka", code: "lk" },
            "LRD": { name: "Liberian Dollar", country: "Liberia", code: "lr" },
            "LSL": { name: "Lesotho Loti", country: "Lesotho", code: "ls" },
            "LYD": { name: "Libyan Dinar", country: "Libya", code: "ly" },
            "MAD": { name: "Moroccan Dirham", country: "Morocco", code: "ma" },
            "MDL": { name: "Moldovan Leu", country: "Moldova", code: "md" },
            "MGA": { name: "Malagasy Ariary", country: "Madagascar", code: "mg" },
            "MKD": { name: "Macedonian Denar", country: "North Macedonia", code: "mk" },
            "MMK": { name: "Myanma Kyat", country: "Myanmar", code: "mm" },
            "MNT": { name: "Mongolian Tugrik", country: "Mongolia", code: "mn" },
            "MOP": { name: "Macanese Pataca", country: "Macao", code: "mo" },
            "MRU": { name: "Mauritanian Ouguiya", country: "Mauritania", code: "mr" },
            "MUR": { name: "Mauritian Rupee", country: "Mauritius", code: "mu" },
            "MVR": { name: "Maldivian Rufiyaa", country: "Maldives", code: "mv" },
            "MWK": { name: "Malawian Kwacha", country: "Malawi", code: "mw" },
            "MXN": { name: "Mexican Peso", country: "Mexico", code: "mx" },
            "MYR": { name: "Malaysian Ringgit", country: "Malaysia", code: "my" },
            "MZN": { name: "Mozambican Metical", country: "Mozambique", code: "mz" },
            "NAD": { name: "Namibian Dollar", country: "Namibia", code: "na" },
            "NGN": { name: "Nigerian Naira", country: "Nigeria", code: "ng" },
            "NIO": { name: "Nicaraguan C√≥rdoba", country: "Nicaragua", code: "ni" },
            "NOK": { name: "Norwegian Krone", country: "Norway", code: "no" },
            "NPR": { name: "Nepalese Rupee", country: "Nepal", code: "np" },
            "NZD": { name: "New Zealand Dollar", country: "New Zealand", code: "nz" },
            "OMR": { name: "Omani Rial", country: "Oman", code: "om" },
            "PAB": { name: "Panamanian Balboa", country: "Panama", code: "pa" },
            "PEN": { name: "Peruvian Nuevo Sol", country: "Peru", code: "pe" },
            "PGK": { name: "Papua New Guinean Kina", country: "Papua New Guinea", code: "pg" },
            "PHP": { name: "Philippine Peso", country: "Philippines", code: "ph" },
            "PKR": { name: "Pakistani Rupee", country: "Pakistan", code: "pk" },
            "PLN": { name: "Polish Zloty", country: "Poland", code: "pl" },
            "PYG": { name: "Paraguayan Guarani", country: "Paraguay", code: "py" },
            "QAR": { name: "Qatari Rial", country: "Qatar", code: "qa" },
            "RON": { name: "Romanian Leu", country: "Romania", code: "ro" },
            "RSD": { name: "Serbian Dinar", country: "Serbia", code: "rs" },
            "RUB": { name: "Russian Ruble", country: "Russia", code: "ru" },
            "RWF": { name: "Rwandan Franc", country: "Rwanda", code: "rw" },
            "SAR": { name: "Saudi Riyal", country: "Saudi Arabia", code: "sa" },
            "SBD": { name: "Solomon Islands Dollar", country: "Solomon Islands", code: "sb" },
            "SCR": { name: "Seychellois Rupee", country: "Seychelles", code: "sc" },
            "SDG": { name: "Sudanese Pound", country: "Sudan", code: "sd" },
            "SEK": { name: "Swedish Krona", country: "Sweden", code: "se" },
            "SGD": { name: "Singapore Dollar", country: "Singapore", code: "sg" },
            "SHP": { name: "Saint Helena Pound", country: "Saint Helena", code: "sh" },
            "SLE": { name: "Sierra Leonean Leone", country: "Sierra Leone", code: "sl" },
            "SOS": { name: "Somali Shilling", country: "Somalia", code: "so" },
            "SRD": { name: "Surinamese Dollar", country: "Suriname", code: "sr" },
            "STN": { name: "S√£o Tom√© and Pr√≠ncipe Dobra", country: "S√£o Tom√© and Pr√≠ncipe", code: "st" },
            "SYP": { name: "Syrian Pound", country: "Syria", code: "sy" },
            "SZL": { name: "Swazi Lilangeni", country: "Eswatini", code: "sz" },
            "THB": { name: "Thai Baht", country: "Thailand", code: "th" },
            "TJS": { name: "Tajikistani Somoni", country: "Tajikistan", code: "tj" },
            "TMT": { name: "Turkmenistani Manat", country: "Turkmenistan", code: "tm" },
            "TND": { name: "Tunisian Dinar", country: "Tunisia", code: "tn" },
            "TOP": { name: "Tongan Paanga", country: "Tonga", code: "to" },
            "TRY": { name: "Turkish Lira", country: "Turkey", code: "tr" },
            "TTD": { name: "Trinidad and Tobago Dollar", country: "Trinidad and Tobago", code: "tt" },
            "TVD": { name: "Tuvaluan Dollar", country: "Tuvalu", code: "tv" },
            "TWD": { name: "New Taiwan Dollar", country: "Taiwan", code: "tw" },
            "TZS": { name: "Tanzanian Shilling", country: "Tanzania", code: "tz" },
            "UAH": { name: "Ukrainian Hryvnia", country: "Ukraine", code: "ua" },
            "UGX": { name: "Ugandan Shilling", country: "Uganda", code: "ug" },
            "USD": { name: "US Dollar", country: "United States", code: "us" },
            "UYU": { name: "Uruguayan Peso", country: "Uruguay", code: "uy" },
            "UZS": { name: "Uzbekistan Som", country: "Uzbekistan", code: "uz" },
            "VES": { name: "Venezuelan Bol√≠var", country: "Venezuela", code: "ve" },
            "VND": { name: "Vietnamese Dong", country: "Vietnam", code: "vn" },
            "VUV": { name: "Vanuatu Vatu", country: "Vanuatu", code: "vu" },
            "WST": { name: "Samoan Tala", country: "Samoa", code: "ws" },
            "XAF": { name: "CFA Franc BEAC", country: "Central African Republic", code: "cf" },
            "XCD": { name: "East Caribbean Dollar", country: "Eastern Caribbean", code: "ag" },
            "XDR": { name: "Special Drawing Rights", country: "International Monetary Fund", code: "un" },
            "XOF": { name: "CFA Franc BCEAO", country: "West African States", code: "sn" },
            "XPF": { name: "CFP Franc", country: "French Polynesia", code: "pf" },
            "YER": { name: "Yemeni Rial", country: "Yemen", code: "ye" },
            "ZAR": { name: "South African Rand", country: "South Africa", code: "za" },
            "ZMW": { name: "Zambian Kwacha", country: "Zambia", code: "zm" },
            "ZWL": { name: "Zimbabwean Dollar", country: "Zimbabwe", code: "zw" }
        };

        let exchangeRates = {};
        let currentTheme = 'dark';

        // Debounce function to limit rapid input events
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Initialize the application
        function init() {
            // Load saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                if (savedTheme === 'light') {
                    document.body.setAttribute('data-theme', 'light');
                    document.querySelector('.theme-toggle').textContent = 'üåô';
                }
            }

            const resultSection = document.getElementById('result-section');
            resultSection.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading currencies...</p>
                </div>
            `;
            resultSection.classList.add('show');

            populateCurrencySelects();
            fetchExchangeRates();
            setupEventListeners();
        }

        // Populate currency select dropdowns
        function populateCurrencySelects() {
            const fromSelect = document.getElementById('from-currency');
            const toSelect = document.getElementById('to-currency');
            
            // Clear existing options
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            // Create a document fragment for better performance
            const fragment = document.createDocumentFragment();
            
            // Add all currencies
            for (const [code, data] of Object.entries(currencies)) {
                const option = document.createElement('option');
                option.value = code;
                option.textContent = `${code} - ${data.name}`;
                fragment.appendChild(option);
            }
            
            // Append to both selects
            fromSelect.appendChild(fragment.cloneNode(true));
            toSelect.appendChild(fragment.cloneNode(true));
            
            // Set default values
            fromSelect.value = 'INR';
            toSelect.value = 'USD';
            
            // Update flags
            updateFlag('from', 'INR');
            updateFlag('to', 'USD');
        }

        // Fetch exchange rates from API
        async function fetchExchangeRates(baseCurrency = 'INR') {
            try {
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${baseCurrency}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                exchangeRates = data.rates;
                exchangeRates[baseCurrency] = 1; // Add base currency
                localStorage.setItem('exchangeRates', JSON.stringify({
                    rates: exchangeRates,
                    timestamp: new Date().getTime(),
                    base: baseCurrency
                }));
            } catch (error) {
                console.error('Error fetching exchange rates:', error);
                const cached = localStorage.getItem('exchangeRates');
                if (cached) {
                    const { rates, timestamp, base } = JSON.parse(cached);
                    const age = (new Date().getTime() - timestamp) / (1000 * 60 * 60);
                    if (age < 24 && base === baseCurrency) {
                        exchangeRates = rates;
                        showError('Using cached exchange rates due to API failure.');
                        return;
                    }
                }
                showError('Failed to fetch exchange rates. Please try again later.');
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            const fromAmount = document.getElementById('from-amount');
            const fromCurrency = document.getElementById('from-currency');
            const toCurrency = document.getElementById('to-currency');

            fromAmount.addEventListener('input', debounce(() => {
                if (fromAmount.value < 0) {
                    fromAmount.value = 0;
                    showError('Amount cannot be negative.');
                } else if (fromAmount.value > 1000000000) {
                    fromAmount.value = 1000000000;
                    showError('Amount is too large. Maximum is 1 billion.');
                }
                convertCurrency();
            }, 300));

            fromCurrency.addEventListener('change', () => {
                updateFlag('from', fromCurrency.value);
                convertCurrency();
            });

            toCurrency.addEventListener('change', () => {
                updateFlag('to', toCurrency.value);
                convertCurrency();
            });
        }

        // Update flag based on currency selection
        function updateFlag(type, currencyCode) {
            const flagElement = document.getElementById(`${type}-flag`);
            const countryCode = currencies[currencyCode]?.code || 'un';
            flagElement.src = `https://flagcdn.com/w40/${countryCode}.png`;
            flagElement.alt = `${currencyCode} flag`;
        }

        // Convert currency
        async function convertCurrency() {
            const amount = parseFloat(document.getElementById('from-amount').value);
            const fromCurrency = document.getElementById('from-currency').value;
            const toCurrency = document.getElementById('to-currency').value;
            const resultSection = document.getElementById('result-section');

            if (!amount || amount <= 0) {
                resultSection.classList.remove('show');
                return;
            }

            if (Object.keys(exchangeRates).length === 0 || !exchangeRates[fromCurrency]) {
                resultSection.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading exchange rates...</p>
                    </div>
                `;
                resultSection.classList.add('show');
                await fetchExchangeRates(fromCurrency);
            }

            try {
                const fromRate = exchangeRates[fromCurrency] || 1;
                const toRate = exchangeRates[toCurrency] || 1;
                const convertedAmount = (amount / fromRate) * toRate;

                document.getElementById('to-amount').value = convertedAmount.toFixed(2);
                displayResults(amount, convertedAmount, fromCurrency, toCurrency, toRate / fromRate);
                resultSection.classList.add('show');
            } catch (error) {
                console.error('Conversion error:', error);
                showError('Error during conversion. Please try again.');
            }
        }

        // Display conversion results
        function displayResults(amount, convertedAmount, fromCurrency, toCurrency, exchangeRate) {
            const resultSection = document.getElementById('result-section');
            const amountInWords = numberToWords(convertedAmount);
            const fromCurrencyData = currencies[fromCurrency];
            const toCurrencyData = currencies[toCurrency];

            resultSection.innerHTML = `
                <div class="conversion-result">
                    <div class="conversion-amount">
                        ${convertedAmount.toLocaleString(undefined, {
                            minimumFractionDigits: 2,
                            maximumFractionDigits: 2
                        })} ${toCurrency}
                    </div>
                    <div class="conversion-words">
                        ${amountInWords} ${toCurrencyData.name}
                    </div>
                </div>

                <div class="currency-details">
                    <div class="currency-detail">
                        <h3>From Currency</h3>
                        <div class="detail-item">
                            <span class="detail-label">Currency:</span>
                            <span class="detail-value">${fromCurrencyData.name}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Country:</span>
                            <span class="detail-value">${fromCurrencyData.country}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Code:</span>
                            <span class="detail-value">${fromCurrency}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Amount:</span>
                            <span class="detail-value">${amount.toLocaleString(undefined, {
                                minimumFractionDigits: 2,
                                maximumFractionDigits: 2
                            })} ${fromCurrency}</span>
                        </div>
                    </div>

                    <div class="currency-detail">
                        <h3>To Currency</h3>
                        <div class="detail-item">
                            <span class="detail-label">Currency:</span>
                            <span class="detail-value">${toCurrencyData.name}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Country:</span>
                            <span class="detail-value">${toCurrencyData.country}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Code:</span>
                            <span class="detail-value">${toCurrency}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Exchange Rate:</span>
                            <span class="detail-value">1 ${fromCurrency} = ${exchangeRate.toFixed(6)} ${toCurrency}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Convert number to words
        function numberToWords(num) {
            if (num === 0) return 'Zero';
            if (num < 0) return 'Negative ' + numberToWords(Math.abs(num));

            const ones = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
            const teens = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
            const tens = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
            const scales = ['', 'Thousand', 'Million', 'Billion', 'Trillion', 'Quadrillion', 'Quintillion'];

            function convertChunk(chunk) {
                let result = '';
                let hundreds = Math.floor(chunk / 100);
                let remainder = chunk % 100;

                if (hundreds > 0) {
                    result += ones[hundreds] + ' Hundred';
                    if (remainder > 0) result += ' ';
                }

                if (remainder >= 20) {
                    result += tens[Math.floor(remainder / 10)];
                    if (remainder % 10 > 0) {
                        result += ' ' + ones[remainder % 10];
                    }
                } else if (remainder >= 10) {
                    result += teens[remainder - 10];
                } else if (remainder > 0) {
                    result += ones[remainder];
                }

                return result;
            }

            const parts = Math.abs(num).toString().split('.');
            const integerPart = parseInt(parts[0]);
            const decimalPart = parts[1] ? parseInt(parts[1].padEnd(2, '0').substring(0, 2)) : 0;

            let result = '';
            
            if (integerPart === 0) {
                result = 'Zero';
            } else {
                const chunks = [];
                let tempNum = integerPart;
                
                while (tempNum > 0) {
                    chunks.unshift(tempNum % 1000);
                    tempNum = Math.floor(tempNum / 1000);
                }

                for (let i = 0; i < chunks.length; i++) {
                    const chunk = chunks[i];
                    if (chunk > 0) {
                        const chunkText = convertChunk(chunk);
                        const scaleIndex = chunks.length - 1 - i;
                        if (scaleIndex > 0) {
                            result += chunkText + ' ' + scales[scaleIndex] + ' ';
                        } else {
                            result += chunkText;
                        }
                    }
                }
            }

            if (decimalPart > 0) {
                result += ' and ' + convertChunk(decimalPart) + ' Cents';
            }

            return result.trim();
        }

        // Swap currencies
        function swapCurrencies() {
            const fromCurrency = document.getElementById('from-currency');
            const toCurrency = document.getElementById('to-currency');
            const fromAmount = document.getElementById('from-amount');
            const toAmount = document.getElementById('to-amount');

            // Swap currency selections
            const tempCurrency = fromCurrency.value;
            fromCurrency.value = toCurrency.value;
            toCurrency.value = tempCurrency;

            // Swap amounts
            const tempAmount = fromAmount.value;
            fromAmount.value = toAmount.value;
            toAmount.value = tempAmount;

            // Update flags
            updateFlag('from', fromCurrency.value);
            updateFlag('to', toCurrency.value);

            // Convert if there's an amount
            if (fromAmount.value) {
                convertCurrency();
            }

            // Set focus back to the amount input
            fromAmount.focus();
        }

        // Toggle theme
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (currentTheme === 'dark') {
                body.setAttribute('data-theme', 'light');
                themeToggle.textContent = 'üåô';
                currentTheme = 'light';
            } else {
                body.removeAttribute('data-theme');
                themeToggle.textContent = '‚òÄÔ∏è';
                currentTheme = 'dark';
            }
            localStorage.setItem('theme', currentTheme);
        }

        // Show error message
        function showError(message) {
            const resultSection = document.getElementById('result-section');
            resultSection.innerHTML = `
                <div class="error-message">
                    <strong>Error:</strong> ${message}
                </div>
            `;
            resultSection.classList.add('show');
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
